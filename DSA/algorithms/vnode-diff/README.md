# vnode diff 算法

使用 vnode 的框架 如 vue react，其中影响性能比较大的点在于对 children 进行更新。
一般来说 diff 算法出于性能和常见场景考虑只会对 vnode tree 进行同级比较，减少不必要的计算。
一旦新老 vnode tree 的同一层级都存在多个子节点的话，再加上浏览器中，对 DOM 进行操作比较消耗性能，我们需要对尽可能复用现有 DOM 元素，来减少 DOM 操作（创建 & 移动）。
而对 children 进行更新会产生以下几种基本情景

- 新增元素
- 删除元素
- 移动元素

于是我们可以把问题抽象为一道题：
存在 x，y 两个数组，数组元素在该数组内都是唯一不重复的，有以下要求，

- 可以对数组进行增删改查等操作，但是不能重新赋值数组

- 最大可能地复用 x 中的元素，若 x，y 数组同时存在该元素只不能对该元素进行删除操作

那么如何通过最少的步骤将 y 数组变化成 x 数组（形式一致）？

## 参考

- <http://hcysun.me/vue-design/zh/>
